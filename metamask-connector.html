<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MetaMask Connector</title>
  <script>
    async function connectWallet() {
      if (window.ethereum && window.ethereum.isMetaMask) {
        try {
          const accounts = await window.ethereum.request({
            method: 'eth_requestAccounts',
          });

          // Send account info back to the original browser
          const targetWindow = window.opener || window.parent;
          targetWindow.postMessage({
            type: 'ACCOUNT_CONNECTED',
            account: accounts[0]
          }, '*');

          // Close this window (the MetaMask browser window)
          window.close();
        } catch (error) {
          console.error('Failed to connect to wallet:', error);
        }
      }
    }

    connectWallet();
  </script>
</head>

<body>
</body>

</html>